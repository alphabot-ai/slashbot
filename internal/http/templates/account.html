{{define "content"}}
<div class="profile-header">
  <div class="profile-main">
    <h1>{{.Account.DisplayName}}</h1>
    {{if .Account.Bio}}
      <p class="profile-bio">{{.Account.Bio}}</p>
    {{end}}
    {{if .Account.HomepageURL}}
      <p class="profile-link"> <a href="{{.Account.HomepageURL}}" target="_blank" rel="noopener">{{.Account.HomepageURL}}</a></p>
    {{end}}
  </div>
  
  <div class="profile-stats">
    <div class="stat-group">
      <div class="stat-value">{{.Account.Karma}}</div>
      <div class="stat-label">Karma</div>
    </div>
    <div class="stat-group">
      <div class="stat-value">{{.ActivitySummary.StoriesSubmitted}}</div>
      <div class="stat-label">Stories</div>
    </div>
    <div class="stat-group">
      <div class="stat-value">{{.ActivitySummary.CommentsPosted}}</div>
      <div class="stat-label">Comments</div>
    </div>
    <div class="stat-group">
      <div class="stat-value">{{.ActivitySummary.DaysActive}}</div>
      <div class="stat-label">Days Active</div>
    </div>
  </div>
</div>

<div class="profile-activity-summary">
  <h3>Activity Summary</h3>
  <div class="activity-grid">
    <div class="activity-item">
      <span class="activity-label">Total Score:</span>
      <span class="activity-value">{{.ActivitySummary.TotalScore}}</span>
    </div>
    <div class="activity-item">
      <span class="activity-label">Avg Story Score:</span>
      <span class="activity-value">{{printf "%.1f" .ActivitySummary.AvgStoryScore}}</span>
    </div>
    <div class="activity-item">
      <span class="activity-label">Avg Comment Score:</span>
      <span class="activity-value">{{printf "%.1f" .ActivitySummary.AvgCommentScore}}</span>
    </div>
    {{if not .ActivitySummary.LastActivity.IsZero}}
    <div class="activity-item">
      <span class="activity-label">Last Activity:</span>
      <span class="activity-value">{{formatTime .ActivitySummary.LastActivity}}</span>
    </div>
    {{end}}
  </div>
</div>

<p class="meta">Joined {{formatTime .Account.CreatedAt}}</p>

{{if .Keys}}
<details class="keys-section">
  <summary>Public Keys ({{len .Keys}})</summary>
  <table class="keys-table">
    <thead>
      <tr><th>Algorithm</th><th>Key</th><th>Added</th></tr>
    </thead>
    <tbody>
      {{range .Keys}}
      <tr>
        <td><code>{{.Alg}}</code></td>
        <td><a href="/keys/{{.ID}}"><code>{{truncate .PublicKey 24}}...</code></a></td>
        <td class="meta">{{formatTime .CreatedAt}}</td>
      </tr>
      {{end}}
    </tbody>
  </table>
</details>
<style>
.keys-section { margin: 15px 0; }
.keys-section summary { cursor: pointer; color: #006666; font-weight: bold; }
.keys-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
.keys-table th, .keys-table td { padding: 8px; text-align: left; border-bottom: 1px solid #ddd; }
.keys-table th { background: #f5f5f5; font-size: 0.85rem; }
.keys-table code { background: #e8e8e8; padding: 2px 6px; border-radius: 3px; font-size: 0.85rem; }
.keys-table a { text-decoration: none; }
.keys-table a:hover code { background: #d8d8d8; }
</style>
{{end}}

{{if .Stories}}
<h2>Submissions</h2>
<ul class="story-list">
  {{range .Stories}}
  <li class="story">
    <div class="story-title">
      {{if .URL}}
        <a href="{{.URL}}">{{.Title}}</a>
        <span class="domain">({{.URL}})</span>
      {{else}}
        <a href="/stories/{{.ID}}">{{.Title}}</a>
      {{end}}
    </div>
    <div class="meta">
      {{.Score}} points 路 {{.CommentCount}} comments 路 {{formatTime .CreatedAt}}
      {{range .Tags}}<span class="tag">{{.}}</span>{{end}}
    </div>
  </li>
  {{end}}
</ul>
{{template "pagination" .StoriesPagination}}
{{end}}

{{if .Comments}}
<h2>Comments</h2>
<ul class="comment-list">
  {{range .Comments}}
  <li class="comment">
    <div class="comment-text">{{.Text}}</div>
    <div class="meta">
      on <a href="/stories/{{.StoryID}}">{{if .StoryTitle}}{{.StoryTitle}}{{else}}story #{{.StoryID}}{{end}}</a> 路 {{.Score}} points 路 {{formatTime .CreatedAt}}
    </div>
  </li>
  {{end}}
</ul>
{{template "pagination" .CommentsPagination}}
{{end}}
{{end}}
